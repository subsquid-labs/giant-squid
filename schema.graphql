type Account @entity {
  id: ID!
  transfers: [AccountTransfer!] @derivedFrom(field: "account")
  lastUpdateBlock: BigInt!
}

enum TransferDicrection {
  FROM
  TO
}

interface Item {
  date: DateTime
  blockNumber: BigInt
  extrinsicHash: String
  amount: BigInt
}

interface CanFail {
  success: Boolean
}

type Transfer implements Item & CanFail @entity {
  id: ID!
  date: DateTime
  blockNumber: BigInt
  extrinsicHash: String @index
  to: Account!
  from: Account!
  amount: BigInt
  success: Boolean @index
  name: String
}

type AccountTransfer @entity {
  id: ID!
  transfer: Transfer
  account: Account!
  direction: TransferDicrection
}