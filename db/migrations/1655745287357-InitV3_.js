module.exports = class InitV3_1655745287357 {
  name = 'InitV3_1655745287357'

  async up(db) {
    await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_0751309c66e97eac9ef11493623"`)
    await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_76bdfed1a7eb27c6d8ecbb73496"`)
    await db.query(`ALTER TABLE "contribution" DROP CONSTRAINT "FK_2dbb170adc1fcfdd1061e5efe57"`)
    await db.query(`ALTER TABLE "era_nomination" DROP CONSTRAINT "FK_c420e8dd5f1c5e60ae1db5f3493"`)
    await db.query(`ALTER TABLE "era_nomination" DROP CONSTRAINT "FK_1f3fd1936428d0448a74762a2cd"`)
    await db.query(`ALTER TABLE "era_nomination" DROP CONSTRAINT "FK_55ff3f3decb16d8bc348a165310"`)
    await db.query(`DROP INDEX "public"."IDX_0751309c66e97eac9ef1149362"`)
    await db.query(`DROP INDEX "public"."IDX_76bdfed1a7eb27c6d8ecbb7349"`)
    await db.query(`DROP INDEX "public"."IDX_6df781f6988651136911c74fd6"`)
    await db.query(`DROP INDEX "public"."IDX_9b1ac330460a85067ef1c69299"`)
    await db.query(`DROP INDEX "public"."IDX_61377c288f7b49300c2c871032"`)
    await db.query(`DROP INDEX "public"."IDX_48fa66154db4474616332e0f05"`)
    await db.query(`DROP INDEX "public"."IDX_2dbb170adc1fcfdd1061e5efe5"`)
    await db.query(`DROP INDEX "public"."IDX_c420e8dd5f1c5e60ae1db5f349"`)
    await db.query(`DROP INDEX "public"."IDX_1f3fd1936428d0448a74762a2c"`)
    await db.query(`DROP INDEX "public"."IDX_55ff3f3decb16d8bc348a16531"`)
    await db.query(`ALTER TABLE "crowdloan" RENAME COLUMN "block_number" TO "start"`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "to_id"`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "from_id"`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "amount"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "timestamp"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "block_number"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "extrinsic_hash"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "success"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "contributor_id"`)
    await db.query(`ALTER TABLE "transfer" ADD "to" jsonb`)
    await db.query(`ALTER TABLE "transfer" ADD "from" jsonb`)
    await db.query(`ALTER TABLE "transfer" ADD "asset" jsonb`)
    await db.query(`ALTER TABLE "transfer" ADD "type" character varying(12)`)
    await db.query(`ALTER TABLE "contribution" ALTER COLUMN "amount" SET NOT NULL`)
    await db.query(`CREATE INDEX "IDX_046c23d020b95c1f8a3a2f28c5" ON "crowdloan" ("start") `)
    await db.query(`CREATE INDEX "IDX_8d0f2c79f04ed0571d6d8f3f1c" ON "era_nomination" ("era_id") `)
    await db.query(`CREATE INDEX "IDX_fc284e4e8adda73aa3e26b1bc8" ON "era_nomination" ("nominator_id") `)
    await db.query(`CREATE INDEX "IDX_8001c7914ea1cc7ebaf239b443" ON "era_nomination" ("validator_id") `)
    await db.query(`ALTER TABLE "era_nomination" ADD CONSTRAINT "FK_8d0f2c79f04ed0571d6d8f3f1c5" FOREIGN KEY ("era_id") REFERENCES "era"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "era_nomination" ADD CONSTRAINT "FK_fc284e4e8adda73aa3e26b1bc80" FOREIGN KEY ("nominator_id") REFERENCES "era_nominator"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "era_nomination" ADD CONSTRAINT "FK_8001c7914ea1cc7ebaf239b4433" FOREIGN KEY ("validator_id") REFERENCES "era_validator"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
  }

  async down(db) {
    await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_0751309c66e97eac9ef11493623" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_76bdfed1a7eb27c6d8ecbb73496" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "contribution" ADD CONSTRAINT "FK_2dbb170adc1fcfdd1061e5efe57" FOREIGN KEY ("contributor_id") REFERENCES "contributor"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "era_nomination" ADD CONSTRAINT "FK_c420e8dd5f1c5e60ae1db5f3493" FOREIGN KEY ("era_id") REFERENCES "era"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "era_nomination" ADD CONSTRAINT "FK_1f3fd1936428d0448a74762a2cd" FOREIGN KEY ("nominator_id") REFERENCES "era_nominator"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "era_nomination" ADD CONSTRAINT "FK_55ff3f3decb16d8bc348a165310" FOREIGN KEY ("validator_id") REFERENCES "era_validator"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`CREATE INDEX "IDX_0751309c66e97eac9ef1149362" ON "transfer" ("to_id") `)
    await db.query(`CREATE INDEX "IDX_76bdfed1a7eb27c6d8ecbb7349" ON "transfer" ("from_id") `)
    await db.query(`CREATE INDEX "IDX_6df781f6988651136911c74fd6" ON "crowdloan" ("block_number") `)
    await db.query(`CREATE INDEX "IDX_9b1ac330460a85067ef1c69299" ON "contribution" ("block_number") `)
    await db.query(`CREATE INDEX "IDX_61377c288f7b49300c2c871032" ON "contribution" ("extrinsic_hash") `)
    await db.query(`CREATE INDEX "IDX_48fa66154db4474616332e0f05" ON "contribution" ("success") `)
    await db.query(`CREATE INDEX "IDX_2dbb170adc1fcfdd1061e5efe5" ON "contribution" ("contributor_id") `)
    await db.query(`CREATE INDEX "IDX_c420e8dd5f1c5e60ae1db5f349" ON "era_nomination" ("era_id") `)
    await db.query(`CREATE INDEX "IDX_1f3fd1936428d0448a74762a2c" ON "era_nomination" ("nominator_id") `)
    await db.query(`CREATE INDEX "IDX_55ff3f3decb16d8bc348a16531" ON "era_nomination" ("validator_id") `)
    await db.query(`ALTER TABLE "crowdloan" RENAME COLUMN "start" TO "block_number"`)
    await db.query(`ALTER TABLE "transfer" ADD "to_id" character varying`)
    await db.query(`ALTER TABLE "transfer" ADD "from_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "transfer" ADD "amount" numeric`)
    await db.query(`ALTER TABLE "contribution" ADD "timestamp" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "contribution" ADD "block_number" integer`)
    await db.query(`ALTER TABLE "contribution" ADD "extrinsic_hash" text`)
    await db.query(`ALTER TABLE "contribution" ADD "success" boolean`)
    await db.query(`ALTER TABLE "contribution" ADD "contributor_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "to"`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "from"`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "asset"`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "type"`)
    await db.query(`ALTER TABLE "contribution" ALTER COLUMN "amount" DROP NOT NULL`)
    await db.query(`DROP INDEX "public"."IDX_046c23d020b95c1f8a3a2f28c5"`)
    await db.query(`DROP INDEX "public"."IDX_8d0f2c79f04ed0571d6d8f3f1c"`)
    await db.query(`DROP INDEX "public"."IDX_fc284e4e8adda73aa3e26b1bc8"`)
    await db.query(`DROP INDEX "public"."IDX_8001c7914ea1cc7ebaf239b443"`)
    await db.query(`ALTER TABLE "era_nomination" DROP CONSTRAINT "FK_8d0f2c79f04ed0571d6d8f3f1c5"`)
    await db.query(`ALTER TABLE "era_nomination" DROP CONSTRAINT "FK_fc284e4e8adda73aa3e26b1bc80"`)
    await db.query(`ALTER TABLE "era_nomination" DROP CONSTRAINT "FK_8001c7914ea1cc7ebaf239b4433"`)
  }
}
