module.exports = class ShcemaImprovements1651941690965 {
  name = 'ShcemaImprovements1651941690965'

  async up(db) {
    await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_f1f1143749d9fd473890b77054b"`)
    await db.query(`ALTER TABLE "crowdloan" DROP CONSTRAINT "FK_005883fcd4519fa5ae88706b3a5"`)
    await db.query(`ALTER TABLE "crowdloan" DROP CONSTRAINT "FK_7ecfe931e23f88d1e45d5f658f1"`)
    await db.query(`ALTER TABLE "contribution" DROP CONSTRAINT "FK_7f50f702330bd90c3eb85bcbda5"`)
    await db.query(`ALTER TABLE "reward" DROP CONSTRAINT "FK_4832b065968736dc04d37ca5daf"`)
    await db.query(`ALTER TABLE "slash" DROP CONSTRAINT "FK_7bdd91da49e79f51ebd8fb774cb"`)
    await db.query(`ALTER TABLE "bond" DROP CONSTRAINT "FK_97664afb3da1e6d50ba2e9d956a"`)
    await db.query(`ALTER TABLE "account" DROP CONSTRAINT "FK_6b15368424e1f5cf587c2f3c5ac"`)
    await db.query(`DROP INDEX "public"."IDX_f1f1143749d9fd473890b77054"`)
    await db.query(`DROP INDEX "public"."IDX_7ecfe931e23f88d1e45d5f658f"`)
    await db.query(`DROP INDEX "public"."IDX_7f50f702330bd90c3eb85bcbda"`)
    await db.query(`DROP INDEX "public"."IDX_4832b065968736dc04d37ca5da"`)
    await db.query(`DROP INDEX "public"."IDX_7bdd91da49e79f51ebd8fb774c"`)
    await db.query(`DROP INDEX "public"."IDX_97664afb3da1e6d50ba2e9d956"`)
    await db.query(`DROP INDEX "public"."IDX_6b15368424e1f5cf587c2f3c5a"`)
    await db.query(`ALTER TABLE "crowdloan" RENAME COLUMN "chain_id" TO "created_at"`)
    await db.query(`CREATE TABLE "parachain" ("id" character varying NOT NULL, "name" text, "para_id" integer, "relay_chain" text, CONSTRAINT "PK_0f6ac85862a6ca7c8873f699b61" PRIMARY KEY ("id"))`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "date"`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "chain_id"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "date"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "chain_id"`)
    await db.query(`ALTER TABLE "reward" DROP COLUMN "date"`)
    await db.query(`ALTER TABLE "reward" DROP COLUMN "chain_id"`)
    await db.query(`ALTER TABLE "slash" DROP COLUMN "date"`)
    await db.query(`ALTER TABLE "slash" DROP COLUMN "chain_id"`)
    await db.query(`ALTER TABLE "bond" DROP COLUMN "date"`)
    await db.query(`ALTER TABLE "bond" DROP COLUMN "chain_id"`)
    await db.query(`ALTER TABLE "account" DROP COLUMN "chain_id"`)
    await db.query(`ALTER TABLE "transfer" ADD "timestamp" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "contribution" ADD "timestamp" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "reward" ADD "timestamp" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "slash" ADD "timestamp" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "bond" ADD "timestamp" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "crowdloan" DROP COLUMN "created_at"`)
    await db.query(`ALTER TABLE "crowdloan" ADD "created_at" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "crowdloan" ADD CONSTRAINT "FK_005883fcd4519fa5ae88706b3a5" FOREIGN KEY ("parachain_id") REFERENCES "parachain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
  }

  async down(db) {
    await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_f1f1143749d9fd473890b77054b" FOREIGN KEY ("chain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "crowdloan" ADD CONSTRAINT "FK_005883fcd4519fa5ae88706b3a5" FOREIGN KEY ("parachain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "crowdloan" ADD CONSTRAINT "FK_7ecfe931e23f88d1e45d5f658f1" FOREIGN KEY ("chain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "contribution" ADD CONSTRAINT "FK_7f50f702330bd90c3eb85bcbda5" FOREIGN KEY ("chain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "reward" ADD CONSTRAINT "FK_4832b065968736dc04d37ca5daf" FOREIGN KEY ("chain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "slash" ADD CONSTRAINT "FK_7bdd91da49e79f51ebd8fb774cb" FOREIGN KEY ("chain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "bond" ADD CONSTRAINT "FK_97664afb3da1e6d50ba2e9d956a" FOREIGN KEY ("chain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`ALTER TABLE "account" ADD CONSTRAINT "FK_6b15368424e1f5cf587c2f3c5ac" FOREIGN KEY ("chain_id") REFERENCES "chain"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    await db.query(`CREATE INDEX "IDX_f1f1143749d9fd473890b77054" ON "transfer" ("chain_id") `)
    await db.query(`CREATE INDEX "IDX_7ecfe931e23f88d1e45d5f658f" ON "crowdloan" ("chain_id") `)
    await db.query(`CREATE INDEX "IDX_7f50f702330bd90c3eb85bcbda" ON "contribution" ("chain_id") `)
    await db.query(`CREATE INDEX "IDX_4832b065968736dc04d37ca5da" ON "reward" ("chain_id") `)
    await db.query(`CREATE INDEX "IDX_7bdd91da49e79f51ebd8fb774c" ON "slash" ("chain_id") `)
    await db.query(`CREATE INDEX "IDX_97664afb3da1e6d50ba2e9d956" ON "bond" ("chain_id") `)
    await db.query(`CREATE INDEX "IDX_6b15368424e1f5cf587c2f3c5a" ON "account" ("chain_id") `)
    await db.query(`ALTER TABLE "crowdloan" RENAME COLUMN "created_at" TO "chain_id"`)
    await db.query(`DROP TABLE "parachain"`)
    await db.query(`ALTER TABLE "transfer" ADD "date" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "transfer" ADD "chain_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "contribution" ADD "date" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "contribution" ADD "chain_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "reward" ADD "date" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "reward" ADD "chain_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "slash" ADD "date" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "slash" ADD "chain_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "bond" ADD "date" TIMESTAMP WITH TIME ZONE`)
    await db.query(`ALTER TABLE "bond" ADD "chain_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "account" ADD "chain_id" character varying NOT NULL`)
    await db.query(`ALTER TABLE "transfer" DROP COLUMN "timestamp"`)
    await db.query(`ALTER TABLE "contribution" DROP COLUMN "timestamp"`)
    await db.query(`ALTER TABLE "reward" DROP COLUMN "timestamp"`)
    await db.query(`ALTER TABLE "slash" DROP COLUMN "timestamp"`)
    await db.query(`ALTER TABLE "bond" DROP COLUMN "timestamp"`)
    await db.query(`ALTER TABLE "crowdloan" ADD "created_at" character varying NOT NULL`)
    await db.query(`ALTER TABLE "crowdloan" DROP COLUMN "created_at"`)
    await db.query(`ALTER TABLE "crowdloan" DROP CONSTRAINT "FK_005883fcd4519fa5ae88706b3a5"`)
  }
}
